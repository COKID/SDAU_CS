;开发者:bluesky_bluesea@yeah.net。注意，本行须为第一行，不得修改和删除，否则本文件无效！
;计算机组成原理实验系统电脑版 ZCHPC1
;本文件是微指令存储文件。
;开头两个是十六进制的存储地址和下址，其余是二进制控制信号。中间可以添加空格和TAB，分号后是注释，一行一条，空行忽略。

;:下址	CI3~0 	SCC3~0 	DC1	DC2	MRW  	I8~6	I5~3	I2~0	SST    SSHSCi	A口    	B口	 指令 	功能
00:00	1110	0000	000	111	100	011	001	001	000	001	0101	0101	;公共	0→PC、DI#=0
01:00	1110	0000	000	011	100	010	000	011	000	001	0101	0101	;公共	PC→AR、PC+1→PC
02:00	1110	0000	000	001	001	001	000	000	000	000	0000	0000	;公共	MEM→IR
03:00	0010	0000	000	000	100	001	000	000	000	000	0000	0000	;公共	/MAP

04:30	0011	0000	000	000	100	011	000	001	001	000	1000	1000	;ADD	DR+SR→DR
05:30	0011	0000	000	000	100	011	001	001	001	001	1000	1000	;SUB	DR-SR→DR
06:30	0011	0000	000	000	100	011	100	001	001	000	1000	1000	;AND	DR∧SR→DR
07:30	0011	0000	000	000	100	011	011	001	001	000	1000	1000	;OR	DR∨SR→DR
08:30	0011	0000	000	000	100	011	110	001	001	000	1000	1000	;XOR	DRSR→DR
09:30	0011	0000	000	000	100	001	001	001	001	001	1000	1000	;CMP	DR-SR
0A:30	0011	0000	000	000	100	001	100	001	001	000	1000	1000	;TEST	DR∧SR
0B:30	0011	0000	000	000	100	011	000	100	000	000	1000	1000	;MVRR	SR→DR
0C:30	0011	0000	000	000	100	011	000	011	001	001	0000	1000	;INC	DR+1→DR
0D:30	0011	0000	000	000	100	011	001	011	001	000	0000	1000	;DEC	DR-1→DR
0E:30	0011	0000	000	000	100	111	000	011	110	100	0000	1000	;SHL	SHL DR
0F:30	0011	0000	000	000	100	101	000	011	101	100	0000	1000	;SHR	SHR DR
10:30	0011	0100	000	000	100	001	000	000	000	000	0000	0000	;JR CND	JRCnd OFFSET
11:30	0011	0000	010	000	100	011	000	101	000	000	0101	0101	;JR	Offset+IP→PC
12:14	0011	0110	010	011	100	001	000	111	000	000	0000	0000	;IN/OUT	PORT→AR
13:30	0011	0000	001	000	010	001	000	011	000	000	0000	0000	;IN/OUT	R0→IO
14:30	0011	0000	000	000	011	011	000	111	000	000	0000	0000	;IN/OUT	IO→R0
15:1A	0011	0111	000	011	100	011	001	011	000	000	0000	0100	;PSH/F	SP-1→SP,AR
16:30	0011	0000	011	000	000	001	000	000	000	000	0000	0000	;PSH/F	FLAG→MEM
17:1C	0011	0111	000	011	100	010	000	011	000	001	0100	0100	;POP/F	SP→AR,SP+1→SP
18:30	0011	0000	000	000	001	001	000	000	010	000	0000	0000	;PSH/F	MEM→FLAG
19:00	1110	0000	000	011	100	001	000	011	000	000	0000	1000	;STRR	DR→AR
1A:30	0011	0000	001	000	000	001	000	100	000	000	1000	0000	;公共	SR→MEM、CC#=0
1B:00	1110	0000	000	011	100	001	000	100	000	000	1000	0000	;LORR	SR→AR
1C:30	0011	0000	000	000	001	011	000	111	000	000	0000	1000	;公共	MEM→DR、CC#=0
1D:1C	0011	0000	000	011	100	010	000	011	000	001	0101	0101	;MVRD	PC→AR、PC+1→PC、CC#=0
1E:24	0011	0000	000	011	100	010	000	011	000	001	0101	0101	;JMPA	PC→AR、PC+1→PC
1F:00	1110	0000	000	011	100	010	000	011	000	001	0101	0101	;CALA	PC→AR、PC+1→PC
20:00	1110	0000	000	000	001	000	000	111	000	000	0000	0000	;CALA	MEM→Q
21:00	1110	0000	000	011	100	011	001	011	000	000	0000	0100	;CALA	SP-1→SP、→AR
22:30	0011	0000	001	000	000	010	000	010	000	000	0101	0101	;CALA	PC→MEM、Q→PC、CC#=0
23:00	1110	0000	000	011	100	010	000	011	000	001	0100	0100	;RET	SP→AR、SP+1→SP
24:30	0011	0000	000	000	001	011	000	111	000	000	0000	0101	;RET	MEM→PC、CC#=0

30:3A	0011	0010	011	000	100	000	000	111	000	000	0000	0000	;公共	STR→Q、CC#=INT#
31:02	0011	0000	000	011	100	010	000	011	000	001	0101	0101	;公共	PC→AR、PC+1→PC、CC#=0
;中断服务
;3A:31	0011	0000	000	000	100	001	000	000	000	000	0000	0000	;旧3A内容  空操作
3A:00	1110	0000	000	111	100	001	000	000	000	000	0000	0000	;中断	DI#=0	
3B:00	1110	0000	000	011	100	011	001	011	000	000	0000	0100	;中断	SP-1→SP、→AR
3C:00	1110	0000	001	101	000	001	000	100	000	000	0101	0000	;中断	PC→MEM、INTNEW#=0
3D:00	1110	0000	000	011	100	011	001	011	000	000	0000	0100	;中断	SP-1→SP、→AR
3E:00	1110	0000	001	000	000	001	000	010	000	000	0000	0000	;中断	Q→MEM
3F:31	0011	0000	101	000	100	011	000	111	000	000	0000	0101	;中断	INTV#=0、IB→PC、CC#=0
;扩展指令
50:30	0011	0000	000	000	100	011	000	001	001	010	1000	1000	;ADC	DR+SR+CF→DR
51:30	0011	0000	000	000	100	011	001	001	001	010	1000	1000	;SBB	DR-SR-CF→DR
52:30	0011	0000	000	000	100	011	111	011	001	000	0000	1000	;NOT	/DR→DR
53:30	0011	0000	000	000	100	101	000	011	101	111	0000	1000	;ASR	ASR DR
54:30	0011	0000	000	000	100	111	000	011	110	101	0000	1000	;RCL	RCL DR
55:30	0011	0000	000	000	100	101	000	011	101	101	0000	1000	;RCR	RCR DR
56:30	0011	0000	000	000	100	001	000	000	011	000	0000	0000	;CLC	CLC
57:30	0011	0000	000	000	100	001	000	000	100	000	0000	0000	;STC	STC
58:30	0011	0000	000	110	100	001	000	000	000	000	0000	0000	;EI	EI
59:30	0011	0000	000	111	100	001	000	000	000	000	0000	0000	;DI	DI
5A:30	0011	0000	000	000	100	011	000	100	000	000	1000	0101	;JMPR	SR→PC、CC#=0
5B:00	1110	0000	000	011	100	010	000	011	000	001	0101	0101	;LDRA	PC→AR、PC+1→PC
5C:1C	0011	0000	000	011	001	001	000	111	000	000	0000	0000	;LDRA	MEM→AR、CC#=0
5D:00	1110	0000	000	011	100	010	000	011	000	001	0101	0101	;LDRX	PC→AR、PC+1→PC
5E:1C	0011	0000	000	011	001	001	000	101	000	000	1000	0000	;LDRX	MEM+SR→AR、CC#=0
5F:00	1110	0000	000	011	100	010	000	011	000	001	0101	0101	;STRA	PC→AR、PC+1→PC
60:1A	0011	0000	000	011	001	001	000	111	000	000	0000	0000	;STRA	MEM→AR、CC#=0
61:00	1110	0000	000	011	100	010	000	011	000	001	0101	0101	;STRX	PC→AR、PC+1→PC
62:00	1110	0000	000	011	001	001	000	101	000	000	1000	0000	;STRX	MEM+SR→AR、CC#=0
63:30	0011	0000	001	000	000	001	000	011	000	000	0000	1000	;STRX	DR→MEM
64:00	1110	0000	000	011	100	011	001	011	000	000	0000	0100	;CALR	SP-1→SP、→AR
65:00	1110	0000	001	000	000	001	000	100	000	000	0101	0000	;CALR	PC→MEM
66:30	0011	0000	000	000	100	011	000	100	000	000	1000	0101	;CALR	SR→PC、CC#=0
67:00	1110	0000	000	011	100	010	000	011	000	001	0100	0100	;IRET	SP→AR、SP+1→SP
68:23	0011	0000	000	100	001	001	000	000	010	000	0000	0000	;IRET	MEM→STR、CC#、INTOLD#
69:30	0011	0101	000	000	100	001	000	000	000	000	0000	0000	;JR CND	JRCnd OFFSET
6A:30	0011	0000	010	000	100	011	000	101	000	000	0101	0101	;JR CND Offset+IP→PC

FF:00	0000	0000	000	000	000	000	000	000	000	000	0000	0000	
